<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="buildDetail" />
	<meta name="description" content="buildDetail" />
	<!-- 网页标签标题 -->
	<title>buildDetail</title>
	<link rel="shortcut icon" href="/img/docsite.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot="" data-reactid="1" data-react-checksum="-560647850"><header class="header-container header-container-normal" data-reactid="2"><div class="header-body" data-reactid="3"><a href="/zh-cn/index.html" data-reactid="4"><img class="logo" src="/img/docsite.png" data-reactid="5"/></a><div class="search search-normal" data-reactid="6"><span class="icon-search" data-reactid="7"></span></div><span class="language-switch language-switch-normal" data-reactid="8">En</span><div class="header-menu" data-reactid="9"><img class="header-menu-toggle" src="/img/system/menu_gray.png" data-reactid="10"/><ul data-reactid="11"><li class="menu-item menu-item-normal menu-item-normal-active" data-reactid="12"><a href="/zh-cn/docs/installation.html" target="_self" data-reactid="13">文档</a></li></ul></div></div></header><div class="bar" data-reactid="14"><div class="bar-body" data-reactid="15"><img src="/img/system/docs.png" class="front-img" data-reactid="16"/><span data-reactid="17">文档</span><img src="/img/system/docs.png" class="back-img" data-reactid="18"/></div></div><section class="content-section" data-reactid="19"><div class="sidemenu" data-reactid="20"><div class="sidemenu-toggle" data-reactid="21"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png" data-reactid="22"/></div><ul data-reactid="23"><li class="menu-item menu-item-level-1" data-reactid="24"><span data-reactid="25">快速开始</span><ul data-reactid="26"><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="27"><a href="/zh-cn/docs/installation.html" target="_self" data-reactid="28">安装</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="29"><a href="/zh-cn/docs/preparation.html" target="_self" data-reactid="30">准备</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="31"><a href="/zh-cn/docs/create.html" target="_self" data-reactid="32">创建站点</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="33"><a href="/zh-cn/docs/publish.html" target="_self" data-reactid="34">发布站点</a></li></ul></li><li class="menu-item menu-item-level-1" data-reactid="35"><span data-reactid="36">详细教程</span><ul data-reactid="37"><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="38"><a href="/zh-cn/docs/commandLine.html" target="_self" data-reactid="39">命令行使用</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="40"><a href="/zh-cn/docs/doc.html" target="_self" data-reactid="41">文档编写</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="42"><a href="/zh-cn/docs/addDoc.html" target="_self" data-reactid="43">添加文档</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="44"><a href="/zh-cn/docs/addBlog.html" target="_self" data-reactid="45">添加博客</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="46"><a href="/zh-cn/docs/i18n.html" target="_self" data-reactid="47">国际化</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="48"><a href="/zh-cn/docs/redirect.html" target="_self" data-reactid="49">重定向</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="50"><a href="/zh-cn/docs/customStyle.html" target="_self" data-reactid="51">自定义样式</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="52"><a href="/zh-cn/docs/customPage.html" target="_self" data-reactid="53">自定义页面</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="54"><a href="/zh-cn/docs/SEO.html" target="_self" data-reactid="55">搜索引擎优化</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="56"><a href="/zh-cn/docs/search.html" target="_self" data-reactid="57">全局搜索</a></li></ul></li><li class="menu-item menu-item-level-1" data-reactid="58"><span data-reactid="59">其他</span><ul data-reactid="60"><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="61"><a href="/zh-cn/docs/buildDetail.html" target="_self" data-reactid="62">构建细节</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="63"><a href="/zh-cn/docs/path.html" target="_self" data-reactid="64">路径前缀</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="65"><a href="/zh-cn/docs/performance.html" target="_self" data-reactid="66">性能</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="67"><a href="/zh-cn/docs/FAQ.html" target="_self" data-reactid="68">FAQ</a></li></ul></li></ul></div><div class="doc-content markdown-body" data-reactid="69"><h2>构建细节</h2>
<p>本篇简单介绍下docsite的构建细节，便于更好的理解和使用docsite。</p>
<h3>md文档构建</h3>
<p>除了基本的md文本内容，docsite还支持<code>title</code>，<code>keywords</code>，<code>description</code>三个元数据。</p>
<p>在本地开发时，当新增、修改、删除md文档时，会在对应目录中生成对应的json文件，比如<code>/blog/zh-cn/demo.md</code>文档中内容如下：</p>
<pre><code>---
title: demo title
keywords: keywords1,keywords2,keywords3
description: some description
---

## the title
</code></pre>
<p>则会在<code>/zh-cn/blog/</code>下生成一个<code>demo.json</code>文件，内容如下：</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"title"</span>,
  <span class="hljs-attr">"keywords"</span>: <span class="hljs-string">"keywords1,keywords2,keywords3"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"some description"</span>,
  <span class="hljs-attr">"__html"</span>: <span class="hljs-string">"&lt;h2&gt;the title&lt;/h2&gt;"</span>,
  <span class="hljs-attr">"filename"</span>: <span class="hljs-string">"demo.md"</span>,
}
</code></pre>
<h3>js、css构建</h3>
<p>docsite会对<code>pages</code>目录下的一级文件夹中的<code>index.jsx</code>和<code>index.scss</code>文件作构建，在<code>build</code>目录生成对应的js和css文件，文件名为文件夹的名称。比如某个页面为<code>pages/custom/index.jsx</code>，<code>pages/custom/index.scss</code>，那么会在<code>build</code>目录中生成<code>custom.js</code>和<code>custom.css</code>文件。</p>
<h3>html构建</h3>
<p>html构建主要生成两类页面，一个是功能性页面，一个是站点页面。</p>
<ul>
<li>功能页面</li>
</ul>
<p>docsite会根据<code>redirect.ejs</code>在根目录下生成一个<code>index.html</code>文件，用作访问根目录时的跳转。还会生成一个<code>404.html</code>，用于某些静态站点托管平台的自定义404页面的功能。当用户访问一个不存在的页面时，平台会将用户导向<code>404.html</code>，进而跳转到正常的页面。</p>
<ul>
<li>站点页面</li>
</ul>
<p>对于站点页面，docsite依据<code>template.ejs</code>生成HTML页面，页面中引入合适的静态资源。主要分为首页、md页和其他页面三种类型，现分别作说明：</p>
<ol>
<li>首页</li>
</ol>
<p>docsite将<code>src/pages/home</code>文件夹下的<code>index.jsx</code>转换为<code>index.html</code>文件，放置在<code>zh-cn</code>和<code>en-us</code>目录下。</p>
<ol start="2">
<li>md页</li>
</ol>
<p>文档页中，结合<code>docs/zh-cn</code>（或<code>docs/en-us</code>）中的md文档和<code>src/pages/documentation</code>，转换成对应的HTML文件。比如某个文档为<code>docs/zh-cn/demo.md</code>，则会生成<code>zh-cn/docs/demo.html</code>。</p>
<p>博客详情页中，结合<code>blog/zh-cn</code>（或<code>blog/en-us</code>）中的md文档和<code>src/pages/blogDetail</code>，转换成对应的HTML文件。比如某个博客为<code>blog/en-us/demo.md</code>，则会生成<code>en-us/blog/demo.html</code>。</p>
<ol start="3">
<li>其他页面</li>
</ol>
<p>比如某个页面的jsx代码位置为<code>src/pages/demo/index.jsx</code>，则会生成<code>zh-cn/demo/index.html</code>和<code>en-us/demo/index.html</code>。</p>
</div></section></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>