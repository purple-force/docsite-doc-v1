{
  "filename": "buildDetail.md",
  "__html": "<h2>构建细节</h2>\n<p>本篇简单介绍下docsite的构建细节，便于更好的理解和使用docsite。</p>\n<h3>md文档构建</h3>\n<p>除了基本的md文本内容，docsite还支持<code>title</code>，<code>keywords</code>，<code>description</code>三个元数据。</p>\n<p>在本地开发时，当新增、修改、删除md文档时，会在对应目录中生成对应的json文件，比如<code>/blog/zh-cn/demo.md</code>文档中内容如下：</p>\n<pre><code>---\ntitle: demo title\nkeywords: keywords1,keywords2,keywords3\ndescription: some description\n---\n\n## the title\n</code></pre>\n<p>则会在<code>/zh-cn/blog/</code>下生成一个<code>demo.json</code>文件，内容如下：</p>\n<pre><code class=\"language-json\">{\n  <span class=\"hljs-attr\">\"title\"</span>: <span class=\"hljs-string\">\"title\"</span>,\n  <span class=\"hljs-attr\">\"keywords\"</span>: <span class=\"hljs-string\">\"keywords1,keywords2,keywords3\"</span>,\n  <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"some description\"</span>,\n  <span class=\"hljs-attr\">\"__html\"</span>: <span class=\"hljs-string\">\"&lt;h2&gt;the title&lt;/h2&gt;\"</span>,\n  <span class=\"hljs-attr\">\"filename\"</span>: <span class=\"hljs-string\">\"demo.md\"</span>,\n}\n</code></pre>\n<h3>js、css构建</h3>\n<p>docsite会对<code>pages</code>目录下的一级文件夹中的<code>index.jsx</code>和<code>index.scss</code>文件作构建，在<code>build</code>目录生成对应的js和css文件，文件名为文件夹的名称。比如某个页面为<code>pages/custom/index.jsx</code>，<code>pages/custom/index.scss</code>，那么会在<code>build</code>目录中生成<code>custom.js</code>和<code>custom.css</code>文件。</p>\n<h3>html构建</h3>\n<p>html构建主要生成两类页面，一个是功能性页面，一个是站点页面。</p>\n<ul>\n<li>功能页面</li>\n</ul>\n<p>docsite会根据<code>redirect.ejs</code>在根目录下生成一个<code>index.html</code>文件，用作访问根目录时的跳转。还会生成一个<code>404.html</code>，用于某些静态站点托管平台的自定义404页面的功能。当用户访问一个不存在的页面时，平台会将用户导向<code>404.html</code>，进而跳转到正常的页面。</p>\n<ul>\n<li>站点页面</li>\n</ul>\n<p>对于站点页面，docsite依据<code>template.ejs</code>生成HTML页面，页面中引入合适的静态资源。主要分为首页、md页和其他页面三种类型，现分别作说明：</p>\n<ol>\n<li>首页</li>\n</ol>\n<p>docsite将<code>src/pages/home</code>文件夹下的<code>index.jsx</code>转换为<code>index.html</code>文件，放置在<code>zh-cn</code>和<code>en-us</code>目录下。</p>\n<ol start=\"2\">\n<li>md页</li>\n</ol>\n<p>文档页中，结合<code>docs/zh-cn</code>（或<code>docs/en-us</code>）中的md文档和<code>src/pages/documentation</code>，转换成对应的HTML文件。比如某个文档为<code>docs/zh-cn/demo.md</code>，则会生成<code>zh-cn/docs/demo.html</code>。</p>\n<p>博客详情页中，结合<code>blog/zh-cn</code>（或<code>blog/en-us</code>）中的md文档和<code>src/pages/blogDetail</code>，转换成对应的HTML文件。比如某个博客为<code>blog/en-us/demo.md</code>，则会生成<code>en-us/blog/demo.html</code>。</p>\n<ol start=\"3\">\n<li>其他页面</li>\n</ol>\n<p>比如某个页面的jsx代码位置为<code>src/pages/demo/index.jsx</code>，则会生成<code>zh-cn/demo/index.html</code>和<code>en-us/demo/index.html</code>。</p>\n"
}